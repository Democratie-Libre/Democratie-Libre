 {% extends '::layout.html.twig' %}

{% block page_content %}

    <h1>{{version.title}}</h1>

    <p>
        Ancienne version de <a href="{{ path('proposal_show', {'slug': version.proposal.slug}) }}">{{ version.proposal.title }}</a>
    </p>

    {% if version.proposal.webPath is empty %}
        <img src="{{ asset('img/science128.png') }}" class="marginAuto">
    {% else %}
        <img src="{{ asset(version.proposal.webPath) }}" class="marginAuto">
    {% endif %}

    <p>
        Classée dans la thématique : {{ version.theme.title }}<br>
        Date de la version : {{ version.date|date('d/m/Y') }}
    </p>

    {% if not is_granted('firstversion', version) %}
        <a href="{{ path('proposalversion_previous', {'slug': version.slug}) }}">Version précédente</a>
    {% endif %}

    <a href="{{ path('proposalversion_next', {'slug': version.slug}) }}">Version suivante</a>

    <h2>Auteur de la modification</h2>

    <p>
        {{ version.modifyingAuthor.username }}
    </p>

    <h2>Auteur principal</h2>

    <p>
        {% if version.mainAuthor is empty %}
            <p>Cette version n'avait pas d'auteur principal</p>
        {% else%}
            {{ version.mainAuthor.username }}
        {% endif %}
    </p>

    <h2>Auteur(es) secondaire(s)</h2>

    <p>
        {% if version.sideAuthors is empty %}
            <p>Cette version n'avait pas d'auteur secondaire</p>
        {% else%}
            {% for user in version.sideAuthors %}
                {{ user.username }}
            {% endfor %}
        {% endif %}
    </p>

    <h2>Soutien(s)</h2>

    <p>
        {% if version.supportiveUsers is empty %}
            <p>Cette version n'avait pas de soutien</p>
        {% else%}
            {% for user in version.supportiveUsers %}
                {{ user.username }}
            {% endfor %}
        {% endif %}
    </p>

    <h2>Contestataire(s)</h2>

    <p>
        {% if version.opposedUsers is empty %}
            <p>Cette version n'avait pas de contestataire</p>
        {% else%}
            {% for user in version.opposedUsers %}
                {{ user.username }}
            {% endfor %}
        {% endif %}
    </p>

    <h2>Abstract</h2>

    {{ version.abstract }}

    <h2>Contenu</h2>

    {{ version.content }}
{% endblock page_content %}

{% block javascript %}
    {{ parent() }}
{% endblock javascript %}
